{{- /*gotype: model.WebhookMessage*/ -}}
{
"msg_type": "interactive",
"card": {
"header": {
"title": {
"tag": "plain_text",
"content": "{{.Data.GroupLabels.alertname}} {{if filterByStatus .Data.Alerts "firing"}}[{{len (filterByStatus .Data.Alerts "firing")}}] Firing{{end}} {{if filterByStatus .Data.Alerts "resolved"}}[{{len (filterByStatus .Data.Alerts "resolved")}}] Resolved{{end}}"
},
"template": "{{if filterByStatus .Data.Alerts "firing"}}red{{else}}green{{end}}"
},
"elements": [
{{- define "alert-content" }}
{
"tag": "div",
"text": {
"tag": "lark_md",
"content": "**{{if .Resolved}}å‘Šè­¦æ¢å¤ âœ…{{else}}å‘Šè­¦é€šçŸ¥** ğŸš¨{{end}}\n\n<æ¦‚è¦>\n{{.Alert.Annotations.summary}}\n\n<è¯¦æƒ…>\n{{.Alert.Annotations.description | removeEmptyLines}}\n\n{{if .Alert.Annotations.severity}}<å½±å“çº§åˆ«>\n{{.Alert.Annotations.severity}}{{end}}\n\n<{{if .Resolved}}æ¢å¤{{else}}å‘Šè­¦{{end}}æ—¶é—´>\nâ° {{if .Resolved}}{{.Alert.EndsAt.Format "2006-01-02 15:04:05"}}{{else}}{{.Alert.StartsAt.Format "2006-01-02 15:04:05"}}{{end}}{{if .Alert.GeneratorURL}}\n\n<ç›‘æ§é“¾æ¥>\n[æŸ¥çœ‹è¯¦ç»†ç›‘æ§ä¿¡æ¯]({{.Alert.GeneratorURL}}){{end}}"
}
},
{
"tag": "hr"
},
{{- end }}

{{range filterByStatus .Data.Alerts "firing"}}
{{- template "alert-content" (dict "Alert" . "Resolved" false) }}
{{- end }}

{{range filterByStatus .Data.Alerts "resolved"}}
{{- template "alert-content" (dict "Alert" . "Resolved" true) }}
{{- end }}

{
"tag": "note",
"elements": [
{
"tag": "lark_md",
"content": "**å‘Šè­¦ç³»ç»Ÿä¿¡æ¯**\n- **å¤–éƒ¨é“¾æ¥**: {{.Data.ExternalURL}}\n- **æ¥æ”¶è€…**: {{.Data.Receiver}}"
}
]
}
]
}
}